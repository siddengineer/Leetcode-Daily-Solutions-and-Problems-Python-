ğŸ’¡ Pattern

This problem belongs to the Matrix Simulation / Line of Sight pattern â€”
you simulate directional spread from each source (the guards) until a blocking condition (wall or another guard).

It combines:

Grid traversal

Directional BFS / ray propagation

Set-based marking to avoid repeated work

âœ… Approach

Weâ€™ll:

Use a grid to mark cells:

0 â†’ empty

1 â†’ guard

2 â†’ wall

3 â†’ guarded cell

For each guard, we â€œshoot raysâ€ in 4 directions until we hit a wall or another guard.

At the end, count all cells that are still 0.

ğŸš€ Code
class Solution(object):
    def countUnguarded(self, m, n, guards, walls):
        """
        :type m: int
        :type n: int
        :type guards: List[List[int]]
        :type walls: List[List[int]]
        :rtype: int
        """
        # Initialize grid
        grid = [[0] * n for _ in range(m)]

        # Mark walls as 2, guards as 1
        for r, c in walls:
            grid[r][c] = 2
        for r, c in guards:
            grid[r][c] = 1

        # Directions: up, down, left, right
        dirs = [(-1,0), (1,0), (0,-1), (0,1)]

        # For each guard, simulate visibility
        for r, c in guards:
            for dr, dc in dirs:
                nr, nc = r + dr, c + dc
                while 0 <= nr < m and 0 <= nc < n:
                    # Stop if we hit another guard or wall
                    if grid[nr][nc] == 1 or grid[nr][nc] == 2:
                        break
                    # Mark as guarded if not guard or wall
                    if grid[nr][nc] == 0:
                        grid[nr][nc] = 3
                    nr += dr
                    nc += dc

        # Count unguarded empty cells
        unguarded = 0
        for i in range(m):
            for j in range(n):
                if grid[i][j] == 0:
                    unguarded += 1

        return unguarded

ğŸ§  Complexity

Time: O(m*n) in worst case (each guard can scan up to 4 directions across the grid)

Space: O(m*n) for grid

âœ… Example check

Input:

m = 4
n = 6
guards = [[0,0],[1,1],[2,3]]
walls = [[0,1],[2,2],[1,4]]


Output:

7
